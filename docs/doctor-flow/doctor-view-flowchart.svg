<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="1020" viewBox="0 0 1200 1020">
  <defs>
    <style>
      .title { font-family: 'Segoe UI', Arial, sans-serif; font-size: 32px; font-weight: 600; fill: #1F2933; }
      .subtitle { font-family: 'Segoe UI', Arial, sans-serif; font-size: 16px; fill: #52606D; }
      .label { font-family: 'Segoe UI', Arial, sans-serif; font-size: 16px; fill: #102A43; }
      .small { font-family: 'Segoe UI', Arial, sans-serif; font-size: 14px; fill: #52606D; }
      .process { fill: #F2F7FA; stroke: #2F4858; stroke-width: 2; }
      .decision { fill: #FFE8C8; stroke: #C4742C; stroke-width: 2; }
      .start-end { fill: #EAF7F0; stroke: #2F855A; stroke-width: 2; }
      .annotation { fill: #FFFFFF; stroke: #9AA5B1; stroke-width: 1.5; }
      .arrow { stroke: #2F4858; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead); }
      .arrow-soft { stroke: #829AB1; stroke-width: 2; fill: none; marker-end: url(#arrowhead); stroke-dasharray: 6 6; }
    </style>
    <marker id="arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L12,6 L0,12 Z" fill="#2F4858"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1200" height="1020" fill="#F8FAFC"/>
  <rect x="60" y="110" width="1080" height="900" fill="#FFFFFF" stroke="#D9E2EC" stroke-width="2" rx="24" ry="24"/>

  <text x="600" y="70" text-anchor="middle" class="title">Vista del medico - Flujo de reserva de box u hora extra</text>
  <text x="600" y="98" text-anchor="middle" class="subtitle">Enfoque: cupos libres por especialidad y habilitacion de horas extra segun demanda</text>

  <!-- Start -->
  <circle cx="600" cy="150" r="38" class="start-end"/>
  <text x="600" y="150" text-anchor="middle" dominant-baseline="middle" class="label" font-weight="600">Inicio</text>
  <text x="600" y="182" text-anchor="middle" class="small">Ingreso a la vista del medico</text>

  <!-- Panel medico -->
  <rect x="460" y="230" width="280" height="80" rx="20" ry="20" class="process"/>
  <text x="600" y="270" text-anchor="middle" class="label">
    <tspan x="600" dy="-10" font-weight="600">Panel medico</tspan>
    <tspan x="600" dy="24">Resumen del dia y alertas clave</tspan>
  </text>

  <!-- Seleccionar especialidad -->
  <rect x="460" y="340" width="280" height="80" rx="20" ry="20" class="process"/>
  <text x="600" y="380" text-anchor="middle" class="label">
    <tspan x="600" dy="-10" font-weight="600">Selecciona especialidad</tspan>
    <tspan x="600" dy="24">Filtra agenda y boxes asociados</tspan>
  </text>

  <!-- Mostrar cupos -->
  <rect x="430" y="450" width="340" height="110" rx="24" ry="24" class="process"/>
  <text x="600" y="484" text-anchor="middle" class="label">
    <tspan x="600" dy="-8" font-weight="600">Sistema muestra cupos libres</tspan>
    <tspan x="600" dy="22">- Boxes disponibles en la jornada</tspan>
    <tspan x="600" dy="22">- Horas extra sugeridas por demanda</tspan>
    <tspan x="600" dy="22">- Restricciones por equipamiento</tspan>
  </text>

  <!-- Decision -->
  <polygon points="600,580 686,640 600,700 514,640" class="decision"/>
  <text x="600" y="640" text-anchor="middle" class="label" font-weight="600">Necesita hora extra?</text>

  <!-- No path -->
  <rect x="430" y="710" width="340" height="80" rx="22" ry="22" class="process"/>
  <text x="600" y="750" text-anchor="middle" class="label">
    <tspan x="600" dy="-10" font-weight="600">Selecciona box y horario libre</tspan>
    <tspan x="600" dy="24">Valida tiempos, equipamiento y asistente</tspan>
  </text>

  <!-- Junction -->
  <circle cx="600" cy="810" r="12" fill="#2F4858" opacity="0.2"/>

  <!-- Confirmar -->
  <rect x="430" y="840" width="340" height="90" rx="22" ry="22" class="process"/>
  <text x="600" y="882" text-anchor="middle" class="label">
    <tspan x="600" dy="-10" font-weight="600">Confirma reserva y notifica</tspan>
    <tspan x="600" dy="24">Actualiza agenda central y comunica al equipo</tspan>
  </text>

  <!-- End -->
  <circle cx="600" cy="980" r="34" class="start-end"/>
  <text x="600" y="980" text-anchor="middle" dominant-baseline="middle" class="label" font-weight="600">Fin</text>

  <!-- Yes path -->
  <rect x="760" y="560" width="300" height="90" rx="24" ry="24" class="process"/>
  <text x="910" y="598" text-anchor="middle" class="label">
    <tspan x="910" dy="-10" font-weight="600">Revisar horas extra sugeridas</tspan>
    <tspan x="910" dy="24">Sistema proyecta demanda y topes</tspan>
  </text>

  <rect x="760" y="680" width="300" height="90" rx="24" ry="24" class="process"/>
  <text x="910" y="718" text-anchor="middle" class="label">
    <tspan x="910" dy="-10" font-weight="600">Bloquea hora extra y box</tspan>
    <tspan x="910" dy="24">Valida staff extendido y costos</tspan>
  </text>

  <!-- Annotations -->
  <rect x="140" y="470" width="220" height="160" rx="18" ry="18" class="annotation"/>
  <text x="250" y="510" text-anchor="middle" class="label">
    <tspan x="250" dy="-8" font-weight="600">Apoyos automaticos</tspan>
    <tspan x="250" dy="22">- Alertas de sobrecarga</tspan>
    <tspan x="250" dy="22">- Compatibilidad de equipo</tspan>
    <tspan x="250" dy="22">- Sugerencias por tendencia</tspan>
  </text>

  <rect x="140" y="690" width="220" height="150" rx="18" ry="18" class="annotation"/>
  <text x="250" y="730" text-anchor="middle" class="label">
    <tspan x="250" dy="-8" font-weight="600">Datos consultados</tspan>
    <tspan x="250" dy="22">- Agenda compartida</tspan>
    <tspan x="250" dy="22">- Inventario de boxes</tspan>
    <tspan x="250" dy="22">- Disponibilidad de staff</tspan>
  </text>

  <!-- Connectors -->
  <line x1="600" y1="188" x2="600" y2="230" class="arrow"/>
  <line x1="600" y1="310" x2="600" y2="340" class="arrow"/>
  <line x1="600" y1="430" x2="600" y2="450" class="arrow"/>
  <line x1="600" y1="560" x2="600" y2="580" class="arrow"/>
  <line x1="600" y1="700" x2="600" y2="710" class="arrow"/>
  <line x1="600" y1="790" x2="600" y2="798" class="arrow"/>
  <line x1="600" y1="822" x2="600" y2="840" class="arrow"/>
  <line x1="600" y1="930" x2="600" y2="946" class="arrow"/>

  <!-- Yes path connectors -->
  <line x1="686" y1="640" x2="760" y2="640" class="arrow"/>
  <line x1="910" y1="650" x2="910" y2="680" class="arrow"/>
  <path d="M910 770 V810 H600" class="arrow"/>

  <!-- Decision labels -->
  <text x="720" y="624" class="small" font-weight="600">Si</text>
  <text x="620" y="702" class="small" font-weight="600">No</text>

  <!-- Annotation connectors -->
  <path d="M430 520 H360" class="arrow-soft"/>
  <path d="M430 750 H360" class="arrow-soft"/>
</svg>
